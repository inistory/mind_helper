{"ast":null,"code":"var _jsxFileName = \"/Users/kji/Project/Gitlab/mental-health-care/web/src/components/map/MapContainer.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState } from \"react\";\nimport \"./map.css\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst {\n  kakao\n} = window;\nlet infowindow = new kakao.maps.InfoWindow({\n  zIndex: 1\n});\nlet lat = 37.5642135;\nlet lon = 127.0016985;\n\nconst MapContainer = ({\n  searchPlace\n}) => {\n  _s();\n\n  const [gps, setGps] = useState([]);\n  const [map, setMap] = useState({});\n\n  function getGPS() {\n    const userLocation = [];\n\n    function showPosition(position) {\n      var latitude = position.coords.latitude;\n      var longitude = position.coords.longitude; //현재 위치로 지도 이동\n\n      var center = new google.maps.LatLng(latitude, longitude);\n      var myMarker = new google.maps.Marker({\n        map: myMap,\n        position: center\n      });\n      myMap.setCenter(center);\n      myMap.setZoom(18);\n    }\n\n    if (navigator.geolocation) {\n      navigator.geolocation.getCurrentPosition(function (position) {\n        navigator.geolocation.getCurrentPosition(showPosition, showError);\n        lat = position.coords.latitude; // 위도\n\n        lon = position.coords.longitude; // 경도\n\n        console;\n        console.log(lat);\n        const container = document.getElementById(\"map2\");\n        const options = {\n          center: new kakao.maps.LatLng(lat, lon),\n          level: 3\n        };\n        userLocation.push(lat);\n        userLocation.push(lon);\n        console.log(userLocation);\n        setGps(userLocation);\n        setMap(new kakao.maps.Map(container, options));\n      });\n    }\n  }\n\n  useEffect(() => {\n    getGPS();\n  }, []);\n  console.log(gps);\n\n  function placesSearchCB(data, status, pagination) {\n    if (status === kakao.maps.services.Status.OK) {\n      let bounds = new kakao.maps.LatLngBounds();\n\n      for (let i = 0; i < data.length; i++) {\n        displayMarker(data[i]);\n        bounds.extend(new kakao.maps.LatLng(data[i].y, data[i].x));\n      }\n\n      map.setBounds(bounds);\n    }\n  }\n\n  function displayMarker(place) {\n    let marker = new kakao.maps.Marker({\n      map: map,\n      position: new kakao.maps.LatLng(place.y, place.x),\n      image: new kakao.maps.MarkerImage(\"https://cdn3.iconfinder.com/data/icons/flat-pro-basic-set-1-1/32/location-blue-256.png\", new kakao.maps.Size(31, 35), {\n        offset: new kakao.maps.Point(16, 34),\n        alt: \"마커 이미지\"\n      })\n    });\n    kakao.maps.event.addListener(marker, \"mouseover\", function () {\n      // 마커를 클릭하면 장소명이 인포윈도우에 표출\n      infowindow.setContent('<div class=\"info\" >' + \"   <h6>\" + place.place_name + \"</h6>\" + \"    <span>\" + place.road_address_name + \"</span>\" + \"</br>\" + '   <span class=\"jibun gray\">' + place.address_name + \"</span>\" + \"</br>\" + '  <span class=\"tel\">' + place.phone + \"</span>\" + \"</div>\");\n      infowindow.open(map, marker);\n    });\n    kakao.maps.event.addListener(marker, \"mouseout\", function () {\n      infowindow.close();\n    });\n  }\n\n  useEffect(() => {\n    if (gps != [] && map != {} && searchPlace) {\n      const ps = new kakao.maps.services.Places();\n      ps.keywordSearch(searchPlace, placesSearchCB, {\n        location: new kakao.maps.LatLng(gps[0], gps[1]),\n        bounds: new kakao.maps.LatLngBounds(new kakao.maps.LatLng(gps[0] - 0.1, gps[1] - 0.1), new kakao.maps.LatLng(gps[0] + 0.1, gps[1] + 0.1)),\n        radius: 10000\n      });\n    }\n  }, [map, gps, searchPlace]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    id: \"map1\",\n    style: {\n      width: \"350px\",\n      height: \"350px\"\n    }\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 118,\n    columnNumber: 5\n  }, this);\n};\n\n_s(MapContainer, \"IXNtgdZOhwEcxAt9Iube0rU91b4=\");\n\n_c = MapContainer;\nexport default MapContainer;\n\nvar _c;\n\n$RefreshReg$(_c, \"MapContainer\");","map":{"version":3,"sources":["/Users/kji/Project/Gitlab/mental-health-care/web/src/components/map/MapContainer.js"],"names":["React","useEffect","useState","kakao","window","infowindow","maps","InfoWindow","zIndex","lat","lon","MapContainer","searchPlace","gps","setGps","map","setMap","getGPS","userLocation","showPosition","position","latitude","coords","longitude","center","google","LatLng","myMarker","Marker","myMap","setCenter","setZoom","navigator","geolocation","getCurrentPosition","showError","console","log","container","document","getElementById","options","level","push","Map","placesSearchCB","data","status","pagination","services","Status","OK","bounds","LatLngBounds","i","length","displayMarker","extend","y","x","setBounds","place","marker","image","MarkerImage","Size","offset","Point","alt","event","addListener","setContent","place_name","road_address_name","address_name","phone","open","close","ps","Places","keywordSearch","location","radius","width","height"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport \"./map.css\";\nconst { kakao } = window;\nlet infowindow = new kakao.maps.InfoWindow({ zIndex: 1 });\nlet lat = 37.5642135;\nlet lon = 127.0016985;\nconst MapContainer = ({ searchPlace }) => {\n  const [gps, setGps] = useState([]);\n  const [map, setMap] = useState({});\n\n  function getGPS() {\n    const userLocation = [];\n    function showPosition(position) {\n      var latitude = position.coords.latitude;\n      var longitude = position.coords.longitude;\n      //현재 위치로 지도 이동\n      var center = new google.maps.LatLng(latitude, longitude);\n      var myMarker = new google.maps.Marker({ map: myMap, position: center });\n      myMap.setCenter(center);\n      myMap.setZoom(18);\n    }\n    if (navigator.geolocation) {\n      navigator.geolocation.getCurrentPosition(function (position) {\n        navigator.geolocation.getCurrentPosition(showPosition, showError);\n        lat = position.coords.latitude; // 위도\n        lon = position.coords.longitude; // 경도\n        console;\n        console.log(lat);\n        const container = document.getElementById(\"map2\");\n        const options = {\n          center: new kakao.maps.LatLng(lat, lon),\n          level: 3,\n        };\n        userLocation.push(lat);\n        userLocation.push(lon);\n        console.log(userLocation);\n        setGps(userLocation);\n\n        setMap(new kakao.maps.Map(container, options));\n      });\n    }\n  }\n\n  useEffect(() => {\n    getGPS();\n  }, []);\n  console.log(gps);\n\n  function placesSearchCB(data, status, pagination) {\n    if (status === kakao.maps.services.Status.OK) {\n      let bounds = new kakao.maps.LatLngBounds();\n\n      for (let i = 0; i < data.length; i++) {\n        displayMarker(data[i]);\n        bounds.extend(new kakao.maps.LatLng(data[i].y, data[i].x));\n      }\n\n      map.setBounds(bounds);\n    }\n  }\n\n  function displayMarker(place) {\n    let marker = new kakao.maps.Marker({\n      map: map,\n      position: new kakao.maps.LatLng(place.y, place.x),\n      image: new kakao.maps.MarkerImage(\n        \"https://cdn3.iconfinder.com/data/icons/flat-pro-basic-set-1-1/32/location-blue-256.png\",\n        new kakao.maps.Size(31, 35),\n        {\n          offset: new kakao.maps.Point(16, 34),\n          alt: \"마커 이미지\",\n        }\n      ),\n    });\n\n    kakao.maps.event.addListener(marker, \"mouseover\", function () {\n      // 마커를 클릭하면 장소명이 인포윈도우에 표출\n      infowindow.setContent(\n        '<div class=\"info\" >' +\n          \"   <h6>\" +\n          place.place_name +\n          \"</h6>\" +\n          \"    <span>\" +\n          place.road_address_name +\n          \"</span>\" +\n          \"</br>\" +\n          '   <span class=\"jibun gray\">' +\n          place.address_name +\n          \"</span>\" +\n          \"</br>\" +\n          '  <span class=\"tel\">' +\n          place.phone +\n          \"</span>\" +\n          \"</div>\"\n      );\n      infowindow.open(map, marker);\n    });\n    kakao.maps.event.addListener(marker, \"mouseout\", function () {\n      infowindow.close();\n    });\n  }\n\n  useEffect(() => {\n    if (gps != [] && map != {} && searchPlace) {\n      const ps = new kakao.maps.services.Places();\n      ps.keywordSearch(searchPlace, placesSearchCB, {\n        location: new kakao.maps.LatLng(gps[0], gps[1]),\n        bounds: new kakao.maps.LatLngBounds(\n          new kakao.maps.LatLng(gps[0] - 0.1, gps[1] - 0.1),\n          new kakao.maps.LatLng(gps[0] + 0.1, gps[1] + 0.1)\n        ),\n        radius: 10000,\n      });\n    }\n  }, [map, gps, searchPlace]);\n\n  return (\n    <div\n      id=\"map1\"\n      style={{\n        width: \"350px\",\n        height: \"350px\",\n      }}\n    ></div>\n  );\n};\n\nexport default MapContainer;\n"]},"metadata":{},"sourceType":"module"}